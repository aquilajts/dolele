<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Churrasquinho do L√™le - Card√°pio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body {
            font-family: 'Helvetica', sans-serif;
            background: url('static/wallpaperhorizontal.png') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            color: #FFFFFF;
        }
        header {
            text-align: center;
            padding: 15px;
            font-family: 'Lucida Bright', serif;
            font-weight: bold;
            font-size: 2em;
            color: #FFFFFF;
            text-shadow: 2px 2px 4px #000000;
        }
        nav {
            overflow-x: auto;
            white-space: nowrap;
            padding: 10px;
            background-color: rgba(139,0,0,0.9);
            text-align: center;
        }
        nav button {
            background-color: #8B0000;
            color: #FFFFFF;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            margin: 5px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
        }
        nav button:hover { transform: scale(1.05); background-color: #A52A2A; }
        .content { flex: 1; padding-bottom: 100px; }
        .item-row {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 10px 0;
        }
        .item-card {
            background-color: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            width: 150px;
            text-align: center;
            transition: transform 0.2s;
            color: #000000;
        }
        .item-card:hover { transform: scale(1.05); }
        .item-card img {
            width: 150px;
            height: 150px;
            border-radius: 10px;
        }
        .footer {
            background-color: #000000;
            text-align: center;
            padding: 12px;
            font-size: 0.9em;
            margin-top: auto;
        }
        .footer a {
            color: #FFCD00;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>CARD√ÅPIO - CHURRASQUINHO DO L√äLE</header>
    <div style="position: absolute; top: 10px; right: 10px;">
        <a href="/index" title="Voltar para Home">
            <button style="background-color: #8B0000; color: #FFFFFF; border: none; padding: 10px; border-radius: 5px; cursor: pointer; min-width: 48px; min-height: 48px; transition: transform 0.2s;">
                <i class="fas fa-house" style="font-size: 20px;"></i>
            </button>
        </a>
    </div>
    <nav>
        {% for categoria in categorias.keys() %}
        <button onclick="showCategoria('{{ categoria }}')">{{ categoria }}</button>
        {% endfor %}
    </nav>
    
    <div class="content">
        {% for categoria, itens in categorias.items() %}
        <div id="{{ categoria }}" class="categoria" style="display: {% if categoria == 'Bebidas quentes e batidas' %}block{% else %}none{% endif %}; padding: 10px;">
            {% for item in itens|batch(2) %}
            <div class="item-row">
                {% for i in item %}
                <div class="item-card">
                <img src="{{ i.imagem_url }}" onerror="this.src='/static/produtos/default.png'" style="{% if not i.disponivel %}filter: grayscale(100%);{% endif %}">
                <h3 style="font-weight: bold; font-size: 18px; margin: 5px 0;">{{ i.nome }}</h3>
                <p style="font-size: 12px; color: #6B7280; margin: 4px 0;">{{ i.descricao }}</p>
                <p style="color: #4B5563; font-size: 14px; margin: 5px 0;">R$ {{ '%.2f'|format(i.preco) }}</p>
            
                {% if categoria == "P√ÉO COM CHURRAS" %}
                    {% if i.preco == 18 %}
                        <label style="font-size: 12px; color: #4B5563;">
                            Escolha o sabor:
                            <select style="width: 100%; margin-top: 5px;">
                                {% for espeto in categorias['ESPETINHOS'] %}
                                    {% if espeto.preco == 10 %}
                                        <option>{{ espeto.nome }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </label>
                    {% elif i.preco == 22 %}
                        <label style="font-size: 12px; color: #4B5563;">
                            Escolha o sabor:
                            <select id="sabor-{{ i.nome }}" style="width: 100%; margin-top: 5px;">
                                <option>MEDALHAO DE BOI</option>
                                <option>MEDALHAO DE FRANGO</option>
                                <option>PICANHA ORIGINAL</option>
                            </select>
                        </label>
                    {% endif %}
                {% endif %}
            
                {% if i.disponivel %}
                <button onclick="adicionarAoCarrinho('{{ i.ID }}', {{ i.preco }}, '{{ i.nome }}', '{{ categoria }}')">+</button>
                {% else %}
                <p style="color: #D1D5DB;">Indispon√≠vel</p>
                {% endif %}
            </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>

    <footer>
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; background-color: #FFFFFF; padding: 8px 15px; box-shadow: 0 -1px 3px rgba(0,0,0,0.2);">
            <!-- √çcone de sacola -->
            <button onclick="abrirCarrinhoPopup()" style="background: none; border: none; color: #8B0000; font-size: 20px; cursor: pointer;">
                üõçÔ∏è
            </button>
            <!-- Texto de itens e total -->
            <span id="carrinho-info" style="color: #8B0000; font-weight: bold; font-size: 14px;">
                Itens: 0 | Total: R$ 0,00
            </span>
            <!-- Bot√£o de finalizar -->
            <button onclick="abrirModal()" style="background-color: #8B0000; color: #fff; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer;">
                Finalizar
            </button>
        </div>
    </footer>

    <div class="footer">
        <a href="https://www.instagram.com/churrasquinhodolele027" target="_blank">
            @churrasquinhodolele027
        </a><br>
        ABERTO DE 17:30 AS 00:30<br>
        SEGUNDA A SEXTA
    </div>

    <!-- Carrinho -->
    <div id="carrinhoPopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000a0; justify-content:center; align-items:center;">
        <div style="background:#fff; padding:20px; border-radius:10px; width:90%; max-width:400px; max-height:80%; overflow-y:auto; color:#000000;">
            <h3 style="margin-bottom: 10px;">Itens no Carrinho</h3>
            <div id="carrinhoItens"></div>
            
            <div style="display:flex; justify-content:space-between; margin-top:15px;">
                <button onclick="fecharCarrinhoPopup()" style="background:#e5e5e5; padding:8px 12px; border:none; border-radius:6px; cursor:pointer;">
                    Escolher mais produtos
                </button>
                <button onclick="abrirModal()" style="background:#8B0000; color:#fff; padding:8px 12px; border:none; border-radius:6px; cursor:pointer;">
                    Finalizar Pedido
                </button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000a0; justify-content:center; align-items:center;">
        <div style="background:#fff; padding:20px; border-radius:10px; width:90%; max-width:400px; color:#000000;">
            <h3 style="margin-bottom: 10px;">Finalizar Pedido</h3>
            <label>Mesa*:<br><input type="text" id="mesa" required style="width:100%;"></label><br><br>
            <label>Contato*:<br><input type="text" id="contato" required style="width:100%;"></label><br><br>
            <label>Observa√ß√µes:<br><textarea id="obs" rows="3" style="width:100%;"></textarea></label><br><br>
            <button onclick="enviarPedido()">Enviar Pedido</button>
            <button onclick="fecharModal()" style="margin-left:10px;">Cancelar</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
